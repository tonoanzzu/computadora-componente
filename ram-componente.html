<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../paper-dialog-scrollable/paper-dialog-scrollable.html">
<!--Agregada-->
<dom-module id="ram-componente">
    <template>
    <style>
      :host {
        display: block;
      }
      .tarjeta{
          display: block;
          width: 450px

      }
    </style>

  <template is="dom-if" if="[[!estado]]">
      
      <paper-card heading="Ram" alt="Emmental">
        <div class="card-content tarjeta">
        <p>Ultima seleccion: [[seleccionado]]</p>
          <paper-button>
            <iron-icon icon="hardware:developer-board"></iron-icon>Ram
          </paper-button>
          <paper-button raised on-click="_dialogOpenRam">Detalles de Ram
          </paper-button>

        <paper-dialog id="scrollingRam">
            <h2>Cambio de memoria Ram</h2>
            <paper-dialog-scrollable>
                <paper-listbox> 
                    <template is="dom-repeat" items="{{listaRams}}">
                
                        <paper-item on-click="actualizaRam">
                                <paper-item-body two-line>
                                <div>Elemento [[index]]</div>
                                <div secondary>{ Nombre: [[item.name]], Proveedor: [[item.provider]]  }</div>
                                
                                </paper-item-body>
                                <iron-icon icon="warning"></iron-icon>
                        </paper-item>
                                    
                                <!-- <button  on-click="actualizaRam" data-args="[[index]]" >Elemento [[index]]: { Nombre: [[item.name]], Proveedor: [[item.provider]]  } </button> -->
                        
                    </template>
    </paper-listbox>
    </paper-dialog-scrollable>
    <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button dialog-confirm autofocus>OK</paper-button>
    </div>
    </paper-dialog>
    </div>

    </paper-card>

    </template>

    </template>

    <script>
        class RamComponente extends Polymer.Element {
            static get is() {
                return 'ram-componente';
            }
            static get properties() {
                return {
                    ram: {
                        type: Object,
                        value: {},
                        notify: true
                    },
                    estado: {
                        type: Boolean,

                    },
                    listaRams: {
                        type: Array,
                        value: []
                    },

                    seleccionado: {
                        type: String,
                        value: "No seleccionaste ninguno",
                    }

                };
            }

            actualizaRam(e) {
                this.ram = e.model.item;

            }

            connectedCallback() {
                super.connectedCallback();
                this._getAPIInformation();
            }

            _getAPIInformation() {
                let request = new XMLHttpRequest();
                let url = "http://demo6292426.mockable.io/ramMemory";
                request.open('GET', url);
                request.send();
                request.onreadystatechange = () => {
                    if (request.readyState === 4) {
                        console.log(JSON.parse(request.response));
                        this.listaRams = JSON.parse(request.response).data;
                    }
                }
            }

            _dialogOpenRam() {
                this.shadowRoot.querySelector('#scrollingRam').open();
            }
        }

        window.customElements.define(RamComponente.is, RamComponente);
    </script>
</dom-module>