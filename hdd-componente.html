<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">

<dom-module id="hdd-componente">
    <template>
    <style>
      :host {
        display: block;
      }
      .tarjeta{
          display: block;
          width: 450px

      }
    </style>


  <template is="dom-if" if="[[!estado]]">
    
        <paper-card heading="HDD" alt="Emmental">
                <div class="card-content tarjeta">
                  <paper-button>
                    <iron-icon icon="hardware:developer-board"></iron-icon>HDD
                  </paper-button>
                  <paper-button raised on-click="_dialogOpenHdd">Detalles de HDD
                  </paper-button>
        
                <paper-dialog id="scrollingHdd">
                    <h2>Cambio de HDD</h2>
                    <paper-dialog-scrollable>
                        <paper-listbox> 
                            <template is="dom-repeat" items="{{listaHdds}}">
                        
                                    <paper-item-body two-line>
                                            <div>Elemento [[index]]</div>
                                            <div secondary>{ Proveedor: [[item.provider]] , Tama√±o: [[item.size]]  , Velocidad: [[item.size]] }</div>
                                          </paper-item-body>
                                          <iron-icon icon="warning"></iron-icon>
                                        </paper-item>
                                            
                                        <!-- <button  on-click="actualizaRam" data-args="[[index]]" >Elemento [[index]]: { Nombre: [[item.name]], Proveedor: [[item.provider]]  } </button> -->
                                
                            </template>
    </paper-listbox>
    </paper-dialog-scrollable>
    <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button dialog-confirm autofocus>OK</paper-button>
    </div>
    </paper-dialog>
    </div>

    </paper-card>




    <paper-listbox>


        </template>


        </template>



        <script>
            /**
             * `procesador-componente`
             * simulacion de computadora y sus componentes
             *
             * @customElement
             * @polymer
             * @demo demo/index.html
             */
            class HddComponente extends Polymer.Element {
                static get is() {
                    return 'hdd-componente';
                }
                static get properties() {
                    return {
                        hdd: {
                            type: Object,
                            value: {},
                            notify: true
                        },
                        estado: {
                            type: Boolean,

                        },
                        listaHdds: {
                            type: Array,
                            value: []
                        }

                    };
                }

                actualizaHdd(e) {
                    this.hdd = e.model.item;
                    // now you got args you can use them as you want
                }

                connectedCallback() {
                    super.connectedCallback();
                    this._getAPIInformation();
                }

                _getAPIInformation() {
                    let request = new XMLHttpRequest();
                    let url = "https://demo6292426.mockable.io/hddList";
                    request.open('GET', url);
                    request.send();
                    request.onreadystatechange = () => {
                        if (request.readyState === 4) {
                            console.log(JSON.parse(request.response));
                            this.listaHdds = JSON.parse(request.response).data;
                        }
                    }
                }

                _dialogOpenHdd() {
                    this.shadowRoot.querySelector('#scrollingHdd').open();
                }
            }

            window.customElements.define(HddComponente.is, HddComponente);
        </script>
</dom-module>